= Schemas

== Etat initial

[ditaa]
---
+---------------------+
| Application Cockpit |
|                   JS+---+
+---------------------+   |    +-------------+        +-----------+
                          +--->| JsonRPC API +------->| {s}       | 
+---------------------+   |    |          PHP|        |  MongoDB  |
| Backoffice Cockpit  +---+    +------+------+        +-----------+
|                   JS|               |
+---------------------+               |
                                      v
  +------------------+        +----------------+      +-----------+
  | Backoffice Users +------->| Users REST API +----->| {s}       | 
  |                JS|        |             PHP|      |  LDAP     |
  +------------------+        +----------------+      +-----------+
                                      ^
                                      |
                                      |
+------------+                        |               +-----------+
| Newrone    +------------------------+               | {s}       | 
|      Drupal+--------------------------------------->|  MySQL    |       
+------------+                                        +-----------+
----


=== Nouvelle architecture 


[ditaa]
----
+---------------------+
| Application Cockpit +--------+
|                   JS+----+   |
+---------------------+    |   |  +-------------+        +-----------+
                           |   +->| JsonRPC API +------->| {s}       | 
+---------------------+    :   |  |          PHP|        |  MongoDB  |
| Backoffice Cockpit  +--------+  +------+------+        +-----------+
|                   JS+-+  :             |
+---------------------+ |  |             |
                        +--+             v                                 /-----------\
                           |    +----------------+                         |           |
                           +--->| KeyCloak       +---------- SAML -------->| SI Client |
                                |                |                         |           |
                                +----------------+                         \-----------/
                                  ^      |                
+------------+                    :      |            +-----------+
| Newrone    +--------------------+      +----------->| {s}       | 
|      Drupal+--------------------------------------->|  MySQL    |       
+------------+                                        +-----------+
----
